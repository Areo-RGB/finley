<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#1b1d21" media="(prefers-color-scheme: dark)" />
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />
  <title>Finley Profile - QuoVadis</title>
  <link rel="stylesheet" type="text/css" href="styles/bootstrap.css" />
  <link rel="stylesheet" type="text/css" href="styles/style.css" />
  <link
    href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900,900i|Source+Sans+Pro:300,300i,400,400i,600,600i,700,700i,900,900i&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="fonts/css/fontawesome-all.min.css" />
  <link rel="manifest" href="manifest.json" data-pwa-version="set_in_manifest_and_pwa_js" />
  <link rel="apple-touch-icon" sizes="180x180" href="app/icons/icon-192x192.png" />
</head>

<body class="theme-dark" data-highlight="highlight-blue" data-gradient="body-default">
  <div id="preloader">
    <div class="spinner-border color-highlight" role="status"></div>
  </div>

  <div id="page">
    <!-- Footer Navigation -->
    <div id="footer-bar" class="footer-bar-1">
      <a href="page-Vergleich.html"><i class="fa fa-chart-bar"></i><span>Vergleich</span></a>
      <a href="page-profile-finley.html" class="active-nav"><i class="fa fa-futbol"></i><span>Training</span></a>
      <a href="index.html"><i class="fa fa-home"></i><span>Home</span></a>
      <a href="page-videos.html"><i class="fa fa-video"></i><span>Videos</span></a>
      <a href="#" data-menu="menu-settings"><i class="fa fa-cog"></i><span>Settings</span></a>
    </div>

    <!-- Page Content -->
    <div class="page-content">
      <div class="page-content header-clear-small">
        <!-- Combined Workout Setup & Training Dashboard -->
        <div class="card card-style gradient-blue" style="position: relative">
          <div class="content pt-4 pb-4">
            <!-- Configuration Row -->
            <div class="row mb-4">
              <div class="col-4">
                <label class="form-label font-700 mb-2" style="
                      color: white !important;
                      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7) !important;
                      font-size: 0.8rem;
                    ">Anzahl Übungen</label>
                <select id="exercise-amount-select" class="form-select border-0 shadow-m rounded-m" style="
                      color: #212529;
                      background: #ffffff;
                      font-weight: 600;
                      font-size: 0.9rem;
                    ">
                  <option value="1">1 Übung</option>
                  <option value="2">2 Übungen</option>
                  <option value="3">3 Übungen</option>
                  <option value="4">4 Übungen</option>
                  <option value="5">5 Übungen</option>
                  <option value="6" selected>6 Übungen</option>
                  <option value="7">7 Übungen</option>
                  <option value="8">8 Übungen</option>
                </select>
              </div>
              <div class="col-4">
                <label class="form-label font-700 mb-2" style="
                      color: white !important;
                      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7) !important;
                      font-size: 0.8rem;
                    ">Dauer</label>
                <select id="timer-duration-select" class="form-select border-0 shadow-m rounded-m" style="
                      color: #212529;
                      background: #ffffff;
                      font-weight: 600;
                      font-size: 0.9rem;
                    ">
                  <option value="10">10 Sekunden</option>
                  <option value="15" selected>15 Sekunden</option>
                  <option value="20">20 Sekunden</option>
                  <option value="30">30 Sekunden</option>
                  <option value="45">45 Sekunden</option>
                  <option value="60">60 Sekunden</option>
                  <option value="90">90 Sekunden</option>
                  <option value="120">2 Minuten</option>
                </select>
              </div>
              <div class="col-4">
                <label class="form-label font-700 mb-2" style="
                      color: white !important;
                      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7) !important;
                      font-size: 0.8rem;
                    ">Pause</label>
                <select id="rest-duration-select" class="form-select border-0 shadow-m rounded-m" style="
                      color: #212529;
                      background: #ffffff;
                      font-weight: 600;
                      font-size: 0.9rem;
                    ">
                  <option value="5">5 Sekunden</option>
                  <option value="10" selected>10 Sekunden</option>
                  <option value="15">15 Sekunden</option>
                  <option value="30">30 Sekunden</option>
                  <option value="60">1 Minute</option>
                </select>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="row mb-4">
              <div class="col-6">
                <button id="apply-workout-settings"
                  class="btn btn-s btn-full rounded-m text-uppercase font-700 shadow-s" style="
                      background: rgba(255, 255, 255, 0.98);
                      color: #4a89dc;
                      border: 2px solid rgba(255, 255, 255, 0.8);
                      font-size: 0.8rem;
                    ">
                  Apply Settings
                </button>
              </div>
              <div class="col-6">
                <button id="reset-workout-settings"
                  class="btn btn-s btn-full rounded-m text-uppercase font-600 shadow-s" style="
                      background: rgba(255, 255, 255, 0.85);
                      color: #495057;
                      border: 2px solid rgba(255, 255, 255, 0.6);
                      font-size: 0.8rem;
                    ">
                  Reset Default
                </button>
              </div>
            </div>

            <!-- Divider -->
            <div class="divider mt-3 mb-4" style="background-color: rgba(255, 255, 255, 0.3) !important;"></div>

            <!-- Training Dashboard Section -->
            <div class="row mb-4" style="position: relative;">
              <!-- Timer Control Button (Toggle) - positioned to align with left column -->
              <div class="col-4 d-flex justify-content-center" style="position: relative;">
                <button id="timer-toggle-btn" class="color-white" style="
                      position: absolute;
                      top: 50%;
                      transform: translateY(-50%);
                      background: rgba(255, 255, 255, 0.2);
                      border: 2px solid rgba(255, 255, 255, 0.3);
                      border-radius: 50%;
                      width: 50px;
                      height: 50px;
                      font-size: 1.2rem;
                      font-weight: 900;
                      cursor: pointer;
                      opacity: 0.9;
                      transition: all 0.3s ease;
                      z-index: 10;
                    ">
                  <i id="timer-toggle-icon" class="fa fa-play"></i>
                </button>
              </div>

              <!-- Timer Display - centered -->
              <div class="col-4 text-center">
                <div id="timer-display" class="color-white" style="font-size: 3.5rem; font-weight: 900; line-height: 1">
                  15s
                </div>
                <p class="color-white opacity-80 mb-0" style="font-size: 0.9rem">
                  Session Timer
                </p>
              </div>

              <!-- Empty column for balance -->
              <div class="col-4"></div>
            </div>

            <!-- Dashboard Stats Row -->
            <div class="row text-center">
              <div class="col-4">
                <div class="color-white" style="font-size: 1.5rem; font-weight: 700">
                  1/6
                </div>
                <p class="color-white opacity-70 mb-0" style="font-size: 0.8rem">
                  Exercises
                </p>
              </div>
              <div class="col-4">
                <div id="total-duration-display" class="color-white" style="font-size: 1.5rem; font-weight: 700">
                  2:20
                </div>
                <p class="color-white opacity-70 mb-0" style="font-size: 0.8rem">
                  Duration
                </p>
              </div>
              <div class="col-4">
                <div id="progress-percentage" class="color-white" style="font-size: 1.5rem; font-weight: 700">
                  0%
                </div>
                <p class="color-white opacity-70 mb-0" style="font-size: 0.8rem">
                  Progress
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Video Card with Custom Player -->
        <div class="card card-style">
          <div class="content">
            <div class="custom-video-player" style="
                  position: relative;
                  background: #000;
                  border-radius: 10px;
                  overflow: hidden;
                ">
              <video id="main-video" style="
                    width: 100%;
                    height: 300px;
                    display: block;
                    object-fit: cover;
                  " crossorigin="anonymous">
                <source src="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000002092%20V1-0001.mp4"
                  type="video/mp4" />
                Your browser doesn't support HTML5 video.
              </video>

              <!-- Video Title Overlay -->
              <div id="video-title" style="
                    position: absolute;
                    top: 15px;
                    left: 15px;
                    z-index: 15;
                    color: white;
                    font-size: 1.5rem;
                    font-weight: 700;
                    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
                  ">
                Übung 1
              </div>

              <!-- Custom Play/Pause Button -->
              <div class="custom-controls" style="
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background: rgba(0, 0, 0, 0.3);
                    transition: opacity 0.3s ease;
                  ">
                <button id="play-pause-btn" class="play-pause-button" style="
                      background: rgba(255, 255, 255, 0.9);
                      border: none;
                      border-radius: 50%;
                      width: 80px;
                      height: 80px;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      cursor: pointer;
                      transition: all 0.3s ease;
                      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
                    ">
                  <i id="play-pause-icon" class="fa fa-play" style="font-size: 28px; color: #333; margin-left: 4px"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Finley Performance Metrics -->
        <div class="card card-style">
          <div class="content">
            <h3>Performance Metrics</h3>

            <!-- Exercise 1 -->
            <a href="#" class="d-flex mb-3 exercise-card" data-video="1"
              data-url="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000002092%20V1-0001.mp4">
              <div class="w-100 me-3">
                <div class="card card-style m-0 video-card-container" data-card-height="110" style="
                      cursor: pointer;
                      position: relative;
                      overflow: hidden;
                    ">
                  <video class="card-video-bg" muted loop preload="metadata" style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        z-index: 1;
                      ">
                    <source
                      src="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000002092%20V1-0001.mp4"
                      type="video/mp4">
                  </video>
                </div>
              </div>
              <div class="ms-auto w-100">
                <h5 class="font-600 font-16 line-height-sm pt-1">Übung 1</h5>
                <span class="d-block font-11 font-400 opacity-60">Sprint Training</span>
                <h3 class="pt-2 mt-n1"><i class="fa fa-clock color-blue-dark pe-2"></i> 15 s</h3>
              </div>
            </a>
            <div class="divider mt-3 mb-3"></div>

            <!-- Exercise 2 -->
            <a href="#" class="d-flex mb-3 exercise-card" data-video="2"
              data-url="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000003176%20V1-0002.mp4">
              <div class="w-100 me-3">
                <div class="card card-style m-0 video-card-container" data-card-height="110" style="
                      cursor: pointer;
                      position: relative;
                      overflow: hidden;
                    ">
                  <video class="card-video-bg" muted loop preload="metadata" style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        z-index: 1;
                      ">
                    <source
                      src="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000003176%20V1-0002.mp4"
                      type="video/mp4">
                  </video>
                </div>
              </div>
              <div class="ms-auto w-100">
                <h5 class="font-600 font-16 line-height-sm pt-1">Übung 2</h5>
                <span class="d-block font-11 font-400 opacity-60">Agility Training</span>
                <h3 class="pt-2 mt-n1"><i class="fa fa-clock color-blue-dark pe-2"></i> 15 s</h3>
              </div>
            </a>
            <div class="divider mt-3 mb-3"></div>

            <!-- Exercise 4 -->
            <a href="#" class="d-flex mb-3 exercise-card" data-video="4"
              data-url="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000005572%20V1-0004.mp4">
              <div class="w-100 me-3">
                <div class="card card-style m-0 video-card-container" data-card-height="110" style="
                      cursor: pointer;
                      position: relative;
                      overflow: hidden;
                    ">
                  <video class="card-video-bg" muted loop preload="metadata" style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        z-index: 1;
                      ">
                    <source
                      src="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000005572%20V1-0004.mp4"
                      type="video/mp4">
                  </video>
                </div>
              </div>
              <div class="ms-auto w-100">
                <h5 class="font-600 font-16 line-height-sm pt-1">Übung 4</h5>
                <span class="d-block font-11 font-400 opacity-60">Ball Control</span>
                <h3 class="pt-2 mt-n1"><i class="fa fa-clock color-blue-dark pe-2"></i> 15 s</h3>
              </div>
            </a>
            <div class="divider mt-3 mb-3"></div>

            <!-- Exercise 5 -->
            <a href="#" class="d-flex mb-3 exercise-card" data-video="5"
              data-url="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000007004%20V1-0005.mp4">
              <div class="w-100 me-3">
                <div class="card card-style m-0 video-card-container" data-card-height="110" style="
                      cursor: pointer;
                      position: relative;
                      overflow: hidden;
                    ">
                  <video class="card-video-bg" muted loop preload="metadata" style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        z-index: 1;
                      ">
                    <source
                      src="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000007004%20V1-0005.mp4"
                      type="video/mp4">
                  </video>
                </div>
              </div>
              <div class="ms-auto w-100">
                <h5 class="font-600 font-16 line-height-sm pt-1">Übung 5</h5>
                <span class="d-block font-11 font-400 opacity-60">Dribbling</span>
                <h3 class="pt-2 mt-n1"><i class="fa fa-clock color-blue-dark pe-2"></i> 15 s</h3>
              </div>
            </a>
            <div class="divider mt-3 mb-3"></div>

            <!-- Exercise 6 -->
            <a href="#" class="d-flex mb-3 exercise-card" data-video="6"
              data-url="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000008268%20V1-0006.mp4">
              <div class="w-100 me-3">
                <div class="card card-style m-0 video-card-container" data-card-height="110" style="
                      cursor: pointer;
                      position: relative;
                      overflow: hidden;
                    ">
                  <video class="card-video-bg" muted loop preload="metadata" style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        z-index: 1;
                      ">
                    <source
                      src="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000008268%20V1-0006.mp4"
                      type="video/mp4">
                  </video>
                </div>
              </div>
              <div class="ms-auto w-100">
                <h5 class="font-600 font-16 line-height-sm pt-1">Übung 6</h5>
                <span class="d-block font-11 font-400 opacity-60">Finishing</span>
                <h3 class="pt-2 mt-n1"><i class="fa fa-clock color-blue-dark pe-2"></i> 15 s</h3>
              </div>
            </a>
            <div class="divider mt-3 mb-3"></div>

            <!-- Exercise 7 -->
            <a href="#" class="d-flex mb-3 exercise-card" data-video="7"
              data-url="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000009594%20V1-0007.mp4">
              <div class="w-100 me-3">
                <div class="card card-style m-0 video-card-container" data-card-height="110" style="
                      cursor: pointer;
                      position: relative;
                      overflow: hidden;
                    ">
                  <video class="card-video-bg" muted loop preload="metadata" style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        z-index: 1;
                      ">
                    <source
                      src="https://videos-data.fra1.cdn.digitaloceanspaces.com/Untitled%201%2000009594%20V1-0007.mp4"
                      type="video/mp4">
                  </video>
                </div>
              </div>
              <div class="ms-auto w-100">
                <h5 class="font-600 font-16 line-height-sm pt-1">Übung 7</h5>
                <span class="d-block font-11 font-400 opacity-60">Coordination</span>
                <h3 class="pt-2 mt-n1"><i class="fa fa-clock color-blue-dark pe-2"></i> 15 s</h3>
              </div>
            </a>

          </div>
        </div>
      </div>
    </div>

    <!-- Settings Menu -->
    <div id="menu-settings" class="menu menu-box-bottom menu-box-detached">
      <div class="menu-title">
        <h1>Settings</h1>
        <a href="#" class="close-menu"><i class="fa fa-times"></i></a>
      </div>
      <div class="content">
        <div class="list-group list-custom-small">
          <a href="#" data-toggle-theme class="pb-2 ms-n1">
            <i class="fa font-12 fa-moon rounded-s bg-highlight color-white me-3"></i>
            <span>Dark Mode</span>
            <div class="custom-control scale-switch ios-switch">
              <input data-toggle-theme type="checkbox" class="ios-input" id="switch-dark-mode" />
              <label class="custom-control-label" for="switch-dark-mode"></label>
            </div>
            <i class="fa fa-angle-right"></i>
          </a>
          <a href="#" id="fullscreen-toggle" class="pb-2 ms-n1">
            <i class="fa font-12 fa-expand rounded-s bg-blue-dark color-white me-3"></i>
            <span>Fullscreen Mode</span>
            <div class="custom-control scale-switch ios-switch">
              <input type="checkbox" class="ios-input" id="switch-fullscreen-mode" />
              <label class="custom-control-label" for="switch-fullscreen-mode"></label>
            </div>
            <i class="fa fa-angle-right"></i>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Exercise Card Styles -->
  <style>
    /* Gradient Green for Workout Setup Card */
    .gradient-green {
      background: linear-gradient(135deg,
          #28a745 0%,
          #20c997 50%,
          #17a2b8 100%);
      background-size: 200% 200%;
      animation: gradientShift 8s ease infinite;
    }

    @keyframes gradientShift {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    /* Fix dropdown styling for gradient cards */
    .gradient-blue .form-select,
    .gradient-green .form-select {
      background-color: #ffffff !important;
      color: #212529 !important;
      border: none !important;
    }

    .gradient-blue .form-select option,
    .gradient-green .form-select option {
      background-color: #ffffff !important;
      color: #212529 !important;
      padding: 8px 12px !important;
    }

    /* Ensure dropdown options have proper styling */
    .gradient-blue .form-select option:hover,
    .gradient-green .form-select option:hover {
      background-color: #f8f9fa !important;
      color: #212529 !important;
    }

    .gradient-blue .form-select option:checked,
    .gradient-green .form-select option:checked {
      background-color: #4a89dc !important;
      color: #ffffff !important;
    }

    /* Fix form labels in gradient cards for both light and dark mode */
    .gradient-blue .form-label,
    .gradient-green .form-label {
      color: white !important;
      background: none !important;
      background-color: transparent !important;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7) !important;
      padding: 0 !important;
      border-radius: 0 !important;
      border: none !important;
    }

    /* Dark mode specific fixes */
    .theme-dark .gradient-blue .form-label,
    .theme-dark .gradient-green .form-label {
      color: white !important;
      background: none !important;
      background-color: transparent !important;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7) !important;
    }

    /* Ensure labels don't inherit dark mode styles */
    .gradient-blue .form-label *,
    .gradient-green .form-label * {
      background: none !important;
      background-color: transparent !important;
    }

    .exercise-card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .exercise-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }
  </style>

  <script type="text/javascript" src="scripts/bootstrap.min.js"></script>
  <script type="text/javascript" src="scripts/custom.js"></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
      "use strict";

      console.log("🎯 Finley Profile Page Loaded Successfully");





      // Get elements
      const mainVideo = document.getElementById("main-video");
      const videoTitle = document.getElementById("video-title");
      const exerciseCards = document.querySelectorAll(".exercise-card");
      const playPauseBtn = document.getElementById("play-pause-btn");
      const playPauseIcon = document.getElementById("play-pause-icon");
      const customControls = document.querySelector(".custom-controls");

      // Timer elements
      const timerDisplay = document.getElementById("timer-display");
      const timerToggleBtn = document.getElementById("timer-toggle-btn");
      const timerToggleIcon = document.getElementById("timer-toggle-icon");

      // Progress elements
      const progressPercentageElement = document.getElementById(
        "progress-percentage"
      );
      const totalDurationDisplay = document.getElementById(
        "total-duration-display"
      );

      // Workout setup elements
      const exerciseAmountSelect = document.getElementById(
        "exercise-amount-select"
      );
      const timerDurationSelect = document.getElementById(
        "timer-duration-select"
      );
      const restDurationSelect = document.getElementById(
        "rest-duration-select"
      );
      const applySettingsBtn = document.getElementById(
        "apply-workout-settings"
      );
      const resetSettingsBtn = document.getElementById(
        "reset-workout-settings"
      );

      console.log("Found elements:", {
        mainVideo: !!mainVideo,
        videoTitle: !!videoTitle,
        exerciseCards: exerciseCards.length,
        playPauseBtn: !!playPauseBtn,
        customControls: !!customControls,
        timerDisplay: !!timerDisplay,
        timerToggleBtn: !!timerToggleBtn,
        timerToggleIcon: !!timerToggleIcon,
        progressPercentageElement: !!progressPercentageElement,
        totalDurationDisplay: !!totalDurationDisplay,
        exerciseAmountSelect: !!exerciseAmountSelect,
        timerDurationSelect: !!timerDurationSelect,
        restDurationSelect: !!restDurationSelect,
        applySettingsBtn: !!applySettingsBtn,
        resetSettingsBtn: !!resetSettingsBtn,
      });

      // Workout setup configuration
      let workoutConfig = {
        totalExercises: 6,
        timerDuration: 15,
        restDuration: 10,
      };

      // Timer functionality
      let timerSeconds = workoutConfig.timerDuration;
      let timerInterval = null;
      let isTimerRunning = false;
      let currentExercise = 1; // Starting at exercise 1 (beginning of workout)
      let totalExercises = workoutConfig.totalExercises;

      function updateTimerDisplay() {
        timerDisplay.textContent = `${timerSeconds}s`;
      }

      function updateProgressPercentage() {
        // Calculate total workout duration
        const exerciseDuration =
          workoutConfig.timerDuration * workoutConfig.totalExercises;
        const restDuration =
          workoutConfig.restDuration * (workoutConfig.totalExercises - 1);
        const totalWorkoutSeconds = exerciseDuration + restDuration;

        // Calculate elapsed time: completed exercises + current exercise progress + rest periods
        const completedExercises = currentExercise - 1;
        const completedExerciseTime =
          completedExercises * workoutConfig.timerDuration;
        const currentExerciseElapsed =
          workoutConfig.timerDuration - timerSeconds;
        const completedRestTime =
          completedExercises * workoutConfig.restDuration;

        const totalElapsedSeconds =
          completedExerciseTime + currentExerciseElapsed + completedRestTime;

        // Calculate progress percentage (0% = start, 100% = complete workout)
        const workoutProgress = Math.round(
          (totalElapsedSeconds / totalWorkoutSeconds) * 100
        );

        if (progressPercentageElement) {
          progressPercentageElement.textContent = `${workoutProgress}%`;
          console.log(
            `📊 Workout progress updated: ${workoutProgress}% (${totalElapsedSeconds}s/${totalWorkoutSeconds}s completed)`
          );
        }
      }

      function updateTotalDuration() {
        // Calculate total duration: (timer duration × total exercises) + (rest duration × (total exercises - 1))
        const exerciseDuration =
          workoutConfig.timerDuration * workoutConfig.totalExercises;
        const restDuration =
          workoutConfig.restDuration * (workoutConfig.totalExercises - 1);
        const totalSeconds = exerciseDuration + restDuration;

        // Convert to minutes and seconds
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = totalSeconds % 60;

        // Format as MM:SS
        const formattedTime = `${minutes}:${seconds
          .toString()
          .padStart(2, "0")}`;

        if (totalDurationDisplay) {
          totalDurationDisplay.textContent = formattedTime;
          console.log(
            `⏱️ Total duration updated: ${formattedTime} (${exerciseDuration}s exercises + ${restDuration}s rest = ${totalSeconds}s total)`
          );
        }
      }

      // Workout Setup Management Functions
      function applyWorkoutSettings() {
        const newTotalExercises = parseInt(exerciseAmountSelect.value);
        const newTimerDuration = parseInt(timerDurationSelect.value);
        const newRestDuration = parseInt(restDurationSelect.value);

        // Update configuration
        workoutConfig.totalExercises = newTotalExercises;
        workoutConfig.timerDuration = newTimerDuration;
        workoutConfig.restDuration = newRestDuration;

        // Update working variables
        totalExercises = newTotalExercises;
        timerSeconds = newTimerDuration;

        // Reset current exercise if it exceeds new total
        if (currentExercise > totalExercises) {
          currentExercise = 1;
        }

        // Update displays
        updateTimerDisplay();
        updateProgressPercentage();
        updateExerciseCounter();
        updateTotalDuration();

        console.log("⚙️ Workout settings applied:", workoutConfig);

        // Show success feedback
        applySettingsBtn.textContent = "Applied!";
        applySettingsBtn.style.background = "#155724";
        applySettingsBtn.style.color = "white";
        applySettingsBtn.style.border = "2px solid #155724";

        setTimeout(() => {
          applySettingsBtn.textContent = "Apply Settings";
          applySettingsBtn.style.background = "rgba(255,255,255,0.98)";
          applySettingsBtn.style.color = "#155724";
          applySettingsBtn.style.border = "2px solid rgba(255,255,255,0.8)";
        }, 2000);
      }

      function resetWorkoutSettings() {
        // Reset to defaults
        workoutConfig = {
          totalExercises: 6,
          timerDuration: 15,
          restDuration: 10,
        };

        // Update select elements
        exerciseAmountSelect.value = workoutConfig.totalExercises;
        timerDurationSelect.value = workoutConfig.timerDuration;
        restDurationSelect.value = workoutConfig.restDuration;

        // Update working variables
        totalExercises = workoutConfig.totalExercises;
        timerSeconds = workoutConfig.timerDuration;
        currentExercise = 1; // Reset to beginning of workout

        // Update displays
        updateTimerDisplay();
        updateProgressPercentage();
        updateExerciseCounter();
        updateTotalDuration();

        console.log("🔄 Workout settings reset to defaults:", workoutConfig);

        // Show reset feedback
        resetSettingsBtn.textContent = "Reset!";
        resetSettingsBtn.style.backgroundColor = "#721c24";
        resetSettingsBtn.style.color = "white";
        resetSettingsBtn.style.opacity = "1";

        setTimeout(() => {
          resetSettingsBtn.textContent = "Reset Default";
          resetSettingsBtn.style.backgroundColor = "white";
          resetSettingsBtn.style.color = "#6c757d";
          resetSettingsBtn.style.opacity = "0.9";
        }, 2000);
      }

      function updateExerciseCounter() {
        const exerciseCounterElement = document.querySelector(
          ".row.text-center .col-4:first-child .color-white"
        );
        if (exerciseCounterElement) {
          exerciseCounterElement.textContent = `${currentExercise}/${totalExercises}`;
        }
        // Update progress percentage whenever exercise counter changes
        updateProgressPercentage();
      }

      function updateToggleButton() {
        if (isTimerRunning) {
          timerToggleIcon.className = "fa fa-pause";
        } else {
          timerToggleIcon.className = "fa fa-play";
        }
      }

      function startTimer() {
        if (!isTimerRunning && timerSeconds > 0) {
          isTimerRunning = true;
          updateToggleButton();
          console.log("⏱️ Timer started");

          timerInterval = setInterval(() => {
            timerSeconds--;
            updateTimerDisplay();
            updateProgressPercentage();

            if (timerSeconds <= 0) {
              clearInterval(timerInterval);
              isTimerRunning = false;
              updateToggleButton();
              console.log("⏰ Timer finished!");

              // Increment exercise counter if not at max
              if (currentExercise < totalExercises) {
                currentExercise++;
                updateExerciseCounter();
                console.log(
                  `📈 Exercise incremented to ${currentExercise}/${totalExercises}`
                );
              }

              // Add completion effect and reset timer
              timerDisplay.style.color = "#ff6b6b";
              setTimeout(() => {
                timerDisplay.style.color = "";
                timerSeconds = workoutConfig.timerDuration;
                updateTimerDisplay();
                updateProgressPercentage();
                console.log(
                  `🔄 Timer reset to ${workoutConfig.timerDuration}s`
                );
              }, 2000);
            }
          }, 1000);
        }
      }

      function pauseTimer() {
        if (isTimerRunning) {
          clearInterval(timerInterval);
          isTimerRunning = false;
          updateToggleButton();
          console.log("⏸️ Timer paused");
        }
      }

      function resetTimer() {
        clearInterval(timerInterval);
        isTimerRunning = false;
        timerSeconds = workoutConfig.timerDuration;
        updateTimerDisplay();
        updateProgressPercentage();
        updateToggleButton();
        console.log(`🔄 Timer reset to ${workoutConfig.timerDuration}s`);
      }

      function toggleTimer() {
        if (isTimerRunning) {
          pauseTimer();
        } else {
          startTimer();
        }
      }

      // Timer toggle button event listener
      if (timerToggleBtn) {
        timerToggleBtn.addEventListener("click", function () {
          toggleTimer();
        });
      }

      // Initialize progress percentage and total duration on page load
      updateProgressPercentage();
      updateTotalDuration();

      // Workout setup event listeners
      if (applySettingsBtn) {
        applySettingsBtn.addEventListener("click", function () {
          applyWorkoutSettings();
        });
      }

      if (resetSettingsBtn) {
        resetSettingsBtn.addEventListener("click", function () {
          resetWorkoutSettings();
        });
      }





      // Global utility functions for workout management (accessible from console)
      window.FinleyWorkout = {
        // Progress management
        setProgress: function (exerciseNumber) {
          if (exerciseNumber >= 1 && exerciseNumber <= totalExercises) {
            currentExercise = exerciseNumber;
            updateProgressPercentage();
            updateExerciseCounter();
            console.log(
              `📊 Progress manually set to exercise ${exerciseNumber}/${totalExercises}`
            );
            return true;
          } else {
            console.error(
              `❌ Invalid exercise number. Must be between 1 and ${totalExercises}`
            );
            return false;
          }
        },

        getProgress: function () {
          // Calculate total workout duration
          const exerciseDuration =
            workoutConfig.timerDuration * workoutConfig.totalExercises;
          const restDuration =
            workoutConfig.restDuration * (workoutConfig.totalExercises - 1);
          const totalWorkoutSeconds = exerciseDuration + restDuration;

          // Calculate elapsed time
          const completedExercises = currentExercise - 1;
          const completedExerciseTime =
            completedExercises * workoutConfig.timerDuration;
          const currentExerciseElapsed =
            workoutConfig.timerDuration - timerSeconds;
          const completedRestTime =
            completedExercises * workoutConfig.restDuration;
          const totalElapsedSeconds =
            completedExerciseTime +
            currentExerciseElapsed +
            completedRestTime;

          const workoutProgress = Math.round(
            (totalElapsedSeconds / totalWorkoutSeconds) * 100
          );

          return {
            currentExercise: currentExercise,
            totalExercises: totalExercises,
            timerSeconds: timerSeconds,
            timerDuration: workoutConfig.timerDuration,
            totalWorkoutSeconds: totalWorkoutSeconds,
            totalElapsedSeconds: totalElapsedSeconds,
            workoutProgress: workoutProgress,
            percentage: workoutProgress,
          };
        },

        // Workout setup management
        getWorkoutConfig: function () {
          return { ...workoutConfig };
        },

        setWorkoutConfig: function (
          exercises,
          timerDuration,
          restDuration = 10
        ) {
          if (exercises) exerciseAmountSelect.value = exercises;
          if (timerDuration) timerDurationSelect.value = timerDuration;
          if (restDuration) restDurationSelect.value = restDuration;

          applyWorkoutSettings();
          return this.getWorkoutConfig();
        },

        resetWorkout: function () {
          resetWorkoutSettings();
          return this.getWorkoutConfig();
        },

        // Show help
        help: function () {
          console.log(`
🎯 Finley Workout Management Commands:

FinleyWorkout.setProgress(exerciseNumber)
  - Set current exercise progress (1-6)
  - Example: FinleyWorkout.setProgress(4)

FinleyWorkout.getProgress()
  - Get current progress information
  - Example: FinleyWorkout.getProgress()

FinleyWorkout.getWorkoutConfig()
  - Get current workout configuration
  - Example: FinleyWorkout.getWorkoutConfig()

FinleyWorkout.setWorkoutConfig(exercises, timerDuration, restDuration)
  - Set workout configuration
  - Example: FinleyWorkout.setWorkoutConfig(8, 30, 15)

FinleyWorkout.resetWorkout()
  - Reset workout to default settings
  - Example: FinleyWorkout.resetWorkout()

FinleyWorkout.help()
  - Show this help message
            `);
        },
      };

      console.log(
        "🎯 Workout management system initialized! Type 'FinleyWorkout.help()' for commands."
      );

      // Custom Player Functions
      function updatePlayPauseButton() {
        if (mainVideo.paused) {
          playPauseIcon.className = "fa fa-play";
          playPauseIcon.style.marginLeft = "4px"; // Slight offset for play icon
          customControls.style.opacity = "1";
        } else {
          playPauseIcon.className = "fa fa-pause";
          playPauseIcon.style.marginLeft = "0";
          customControls.style.opacity = "0";
        }
      }

      function togglePlayPause() {
        if (mainVideo.paused) {
          mainVideo.play();
          console.log("▶️ Video playing");
        } else {
          mainVideo.pause();
          console.log("⏸️ Video paused");
        }
        updatePlayPauseButton();
      }

      // Play/Pause button click handler
      if (playPauseBtn) {
        playPauseBtn.addEventListener("click", function (e) {
          e.stopPropagation();
          togglePlayPause();
        });

        // Hover effects
        playPauseBtn.addEventListener("mouseenter", function () {
          this.style.transform = "scale(1.1)";
          this.style.background = "rgba(255,255,255,1)";
        });

        playPauseBtn.addEventListener("mouseleave", function () {
          this.style.transform = "scale(1)";
          this.style.background = "rgba(255,255,255,0.9)";
        });
      }

      // Video container click handler
      if (customControls) {
        customControls.addEventListener("click", function (e) {
          if (e.target === this) {
            togglePlayPause();
          }
        });
      }

      // Show/hide controls on video hover
      const videoPlayer = document.querySelector(".custom-video-player");
      if (videoPlayer) {
        videoPlayer.addEventListener("mouseenter", function () {
          if (mainVideo.paused) {
            customControls.style.opacity = "1";
          }
        });

        videoPlayer.addEventListener("mouseleave", function () {
          if (!mainVideo.paused) {
            customControls.style.opacity = "0";
          }
        });
      }

      // Add click listeners to exercise cards (now performance metric cards)
      exerciseCards.forEach((card, index) => {
        card.addEventListener("click", function () {
          console.log(`Performance metric card ${index + 1} clicked`);

          const videoNumber = this.getAttribute("data-video");
          const videoUrl = this.getAttribute("data-url");
          const exerciseTitle = `Übung ${videoNumber}`;

          console.log("Switching to:", {
            videoNumber,
            videoUrl,
            exerciseTitle,
          });

          // Pause current video and reset controls
          if (mainVideo) {
            mainVideo.pause();
            updatePlayPauseButton();

            const source = mainVideo.querySelector("source");
            if (source) {
              source.src = videoUrl;
              mainVideo.load();
              console.log("Video source updated to:", videoUrl);
            }
          }

          // Update title
          if (videoTitle) {
            videoTitle.textContent = exerciseTitle;
          }

          // Update active state (visual feedback can be added here if needed)
        });
      });

      // Video event listeners
      if (mainVideo) {
        mainVideo.addEventListener("loadstart", () => {
          console.log("🔄 Video loading started");
          updatePlayPauseButton();
        });

        mainVideo.addEventListener("canplay", () => {
          console.log("✅ Video can play");
          updatePlayPauseButton();
        });

        mainVideo.addEventListener("play", () => {
          console.log("▶️ Video started playing");
          updatePlayPauseButton();
        });

        mainVideo.addEventListener("pause", () => {
          console.log("⏸️ Video paused");
          updatePlayPauseButton();
        });

        mainVideo.addEventListener("ended", () => {
          console.log("🏁 Video ended");
          updatePlayPauseButton();
        });

        mainVideo.addEventListener("error", (e) => {
          console.error("❌ Video error:", e);
          updatePlayPauseButton();
        });

        // Initialize button state
        updatePlayPauseButton();
      }

      // Settings Fullscreen Toggle Functionality
      function initSettingsFullscreenToggle() {
        const fullscreenToggle = document.getElementById("fullscreen-toggle");
        const fullscreenSwitch = document.getElementById(
          "switch-fullscreen-mode"
        );
        const fullscreenIcon = fullscreenToggle.querySelector("i");

        // Check if fullscreen is supported
        const isFullscreenSupported =
          document.documentElement.requestFullscreen ||
          document.documentElement.webkitRequestFullscreen ||
          document.documentElement.msRequestFullscreen;

        if (!isFullscreenSupported) {
          // Hide fullscreen option if not supported
          fullscreenToggle.style.display = "none";
          console.log("❌ Fullscreen not supported on this device");
          return;
        }

        // Load saved fullscreen preference
        const savedFullscreenState =
          localStorage.getItem("fullscreen-mode") === "true";
        fullscreenSwitch.checked = savedFullscreenState;
        updateFullscreenIcon(savedFullscreenState);

        // Apply saved state on page load
        if (savedFullscreenState) {
          // Small delay to ensure page is fully loaded
          setTimeout(() => {
            requestFullscreenMode();
          }, 1000);
        }

        // Handle toggle click
        fullscreenToggle.addEventListener("click", function (e) {
          e.preventDefault();
          toggleFullscreenMode();
        });

        // Handle switch change
        fullscreenSwitch.addEventListener("change", function () {
          toggleFullscreenMode();
        });

        function toggleFullscreenMode() {
          const isCurrentlyFullscreen =
            document.fullscreenElement ||
            document.webkitFullscreenElement ||
            document.msFullscreenElement;

          if (isCurrentlyFullscreen) {
            exitFullscreenMode();
          } else {
            requestFullscreenMode();
          }
        }

        function requestFullscreenMode() {
          const element = document.documentElement;

          if (element.requestFullscreen) {
            element
              .requestFullscreen()
              .then(() => {
                onFullscreenEnter();
              })
              .catch((err) => {
                console.warn("Fullscreen request failed:", err);
                onFullscreenError();
              });
          } else if (element.webkitRequestFullscreen) {
            element.webkitRequestFullscreen();
            onFullscreenEnter();
          } else if (element.msRequestFullscreen) {
            element.msRequestFullscreen();
            onFullscreenEnter();
          }
        }

        function exitFullscreenMode() {
          if (document.exitFullscreen) {
            document
              .exitFullscreen()
              .then(() => {
                onFullscreenExit();
              })
              .catch((err) => {
                console.warn("Exit fullscreen failed:", err);
              });
          } else if (document.webkitExitFullscreen) {
            document.webkitExitFullscreen();
            onFullscreenExit();
          } else if (document.msExitFullscreen) {
            document.msExitFullscreen();
            onFullscreenExit();
          }
        }

        function onFullscreenEnter() {
          fullscreenSwitch.checked = true;
          updateFullscreenIcon(true);
          localStorage.setItem("fullscreen-mode", "true");
          document.body.classList.add("fullscreen-active");
          console.log("✅ Entered fullscreen mode");
        }

        function onFullscreenExit() {
          fullscreenSwitch.checked = false;
          updateFullscreenIcon(false);
          localStorage.setItem("fullscreen-mode", "false");
          document.body.classList.remove("fullscreen-active");
          console.log("❌ Exited fullscreen mode");
        }

        function onFullscreenError() {
          fullscreenSwitch.checked = false;
          updateFullscreenIcon(false);
          localStorage.setItem("fullscreen-mode", "false");
          console.error("❌ Fullscreen request failed");
        }

        function updateFullscreenIcon(isFullscreen) {
          if (isFullscreen) {
            fullscreenIcon.className =
              "fa font-12 fa-compress rounded-s bg-blue-dark color-white me-3";
          } else {
            fullscreenIcon.className =
              "fa font-12 fa-expand rounded-s bg-blue-dark color-white me-3";
          }
        }

        // Listen for fullscreen changes (user pressing F11 or Esc)
        document.addEventListener("fullscreenchange", handleFullscreenChange);
        document.addEventListener(
          "webkitfullscreenchange",
          handleFullscreenChange
        );
        document.addEventListener(
          "msfullscreenchange",
          handleFullscreenChange
        );

        function handleFullscreenChange() {
          const isCurrentlyFullscreen =
            document.fullscreenElement ||
            document.webkitFullscreenElement ||
            document.msFullscreenElement;

          if (isCurrentlyFullscreen) {
            onFullscreenEnter();
          } else {
            onFullscreenExit();
          }
        }

        // Handle keyboard shortcuts
        document.addEventListener("keydown", function (e) {
          // F11 key handling
          if (e.key === "F11") {
            e.preventDefault();
            toggleFullscreenMode();
          }

          // Ctrl/Cmd + Shift + F for fullscreen toggle
          if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === "F") {
            e.preventDefault();
            toggleFullscreenMode();
          }
        });

        console.log("🔲 Settings fullscreen toggle initialized");
      }

      // Initialize fullscreen toggle
      initSettingsFullscreenToggle();
    });
  </script>
</body>

</html>
