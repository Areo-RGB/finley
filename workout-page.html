<!DOCTYPE HTML>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
<title>Home Workout - QuoVadis</title>
<link rel="stylesheet" type="text/css" href="styles/bootstrap.css">
<link rel="stylesheet" type="text/css" href="styles/style.css">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900,900i|Source+Sans+Pro:300,300i,400,400i,600,600i,700,700i,900,900i&display=swap" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="fonts/css/fontawesome-all.min.css">
<link rel="manifest" href="_manifest.json" data-pwa-version="set_in_manifest_and_pwa_js">
<link rel="apple-touch-icon" sizes="180x180" href="app/icons/icon-192x192.png">
</head>

<body class="theme-dark" data-highlight="highlight-blue" data-gradient="body-default">

<div id="preloader"><div class="spinner-border color-highlight" role="status"></div></div>

<div id="page">
    <div class="page-content header-clear-small">

   <div class="card card-style position-relative overflow-hidden" id="hero-video-card">
            <video class="position-absolute top-0 start-0 w-100 h-100" style="object-fit: cover; z-index: 1;" muted loop playsinline id="hero-video">
                <source src="https://data3.fra1.cdn.digitaloceanspaces.com/Timeline%201xxs00000000.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="video-overlay position-absolute top-0 start-0 w-100 h-100" style="z-index: 2; background: rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; cursor: pointer;">
                <div class="play-button" style="width: 80px; height: 80px; background: rgba(255,255,255,0.9); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                    <i class="fa fa-play" style="font-size: 24px; color: #333; margin-left: 4px;"></i>
                </div>
            </div>
            <div class="card-bottom p-3 position-relative" style="z-index: 3;">
                <h1 class="color-white">Ãœbung A</h1>
            </div>
            <div class="card-overlay bg-gradient"></div>
        </div>

        <div class="card card-style">
            <div class="content">
                <div class="d-flex">
                    <div class="align-self-center">
                        <h5 class="mb-0 font-18">Table of Contents</h5>
                    </div>
                    <div class="align-self-center ms-auto">
                        <h6 class="mb-0 opacity-30 font-13">2hr, 25min</h6>
                    </div>
                </div>

                <div class="divider mt-3 mb-3"></div>

                <a href="#" class="d-flex mb-3">
                    <div class="align-self-center">
                        <h1 class="pe-3 font-40 font-900 opacity-30">01</h1>
                    </div>
                    <div class="align-self-center">
                        <h4 class="mb-n1 font-17">Gloves and Wrapping</h4>
                        <p class="font-10 opacity-50">15 Minutes</p>
                    </div>
                    <div class="align-self-center ms-auto">
                        <i class="fa fa-play-circle fa-2x color-highlight"></i>
                    </div>
                </a>
                <a href="#" class="d-flex mb-3">
                    <div class="align-self-center">
                        <h1 class="pe-3 font-40 font-900 opacity-30">02</h1>
                    </div>
                    <div class="align-self-center">
                        <h4 class="mb-n1 font-17">Stance and Position</h4>
                        <p class="font-10 px-2 py-1 badge bg-highlight color-white">PREMIUM CHAPTER</p>
                    </div>
                    <div class="align-self-center ms-auto">
                        <i class="fa fa-play-circle fa-2x color-highlight"></i>
                    </div>
                </a>
                <a href="#" class="d-flex mb-3">
                    <div class="align-self-center">
                        <h1 class="pe-3 font-40 font-900 opacity-30">03</h1>
                    </div>
                    <div class="align-self-center">
                        <h4 class="mb-n1 font-17">Guard Stance</h4>
                        <p class="font-10 opacity-50">1 Hour, 15 Minutes</p>
                    </div>
                    <div class="align-self-center ms-auto">
                        <i class="fa fa-play-circle fa-2x color-highlight"></i>
                    </div>
                </a>
                <a href="#" class="d-flex mb-3">
                    <div class="align-self-center">
                        <h1 class="pe-3 font-40 font-900 opacity-30">04</h1>
                    </div>
                    <div class="align-self-center">
                        <h4 class="mb-n1 font-17">Hooks and Jabs</h4>
                        <p class="font-10 opacity-50">1 Hour, 20 Minutes</p>
                    </div>
                    <div class="align-self-center ms-auto">
                        <i class="fa fa-play-circle fa-2x color-highlight"></i>
                    </div>
                </a>
                <a href="#" class="d-flex mb-0">
                    <div class="align-self-center">
                        <h1 class="pe-3 font-40 font-900 opacity-30">05</h1>
                    </div>
                    <div class="align-self-center">
                        <h4 class="mb-n1 font-17">Defense vs Offense</h4>
                        <p class="font-10 opacity-50">1 Hour, 10 Minutes</p>
                    </div>
                    <div class="align-self-center ms-auto">
                        <i class="fa fa-play-circle fa-2x color-highlight"></i>
                    </div>
                </a>
            </div>
        </div>

        <div class="card card-style">
            <div class="content">
                <div class="d-flex">
                    <div class="align-self-center">
                        <h1 class="pe-3 font-40 font-900 opacity-30">01</h1>
                    </div>
                    <div class="align-self-center">
                        <h4 class="mb-n1 font-18">Gloves and Wrapping</h4>
                        <p class="font-10 opacity-50">51 Minutes</p>
                    </div>
                    <div class="align-self-center ms-auto">
                        <i class="fa fa-play-circle fa-2x color-highlight"></i>
                    </div>
                </div>
                <div class="responsive-iframe mt-3">
                    <iframe src='https://www.youtube.com/embed/c9MnSeYYtYY' frameborder='0' allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>
    <!-- End of Page Content-->

    <!-- Settings Menu -->
    <div id="menu-settings" class="menu menu-box-bottom menu-box-detached">
        <div class="menu-title mt-0 pt-0"><h1>Settings</h1><p class="color-highlight">Flexible and Easy to Use</p><a href="#" class="close-menu"><i class="fa fa-times"></i></a></div>
        <div class="divider divider-margins mb-n2"></div>
        <div class="content">
            <div class="list-group list-custom-small">
                <a href="#" data-toggle-theme data-trigger-switch="switch-dark-mode" class="pb-2 ms-n1">
                    <i class="fa font-12 fa-moon rounded-s bg-highlight color-white me-3"></i>
                    <span>Dark Mode</span>
                    <div class="custom-control scale-switch ios-switch">
                        <input data-toggle-theme type="checkbox" class="ios-input" id="switch-dark-mode">
                        <label class="custom-control-label" for="switch-dark-mode"></label>
                    </div>
                    <i class="fa fa-angle-right"></i>
                </a>
            </div>
            <div class="list-group list-custom-large">
                <a data-menu="menu-highlights" href="#">
                    <i class="fa font-14 fa-tint bg-green-dark rounded-s"></i>
                    <span>Page Highlight</span>
                    <strong>16 Colors Highlights Included</strong>
                    <span class="badge bg-highlight color-white">HOT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
                <a data-menu="menu-backgrounds" href="#" class="border-0">
                    <i class="fa font-14 fa-cog bg-blue-dark rounded-s"></i>
                    <span>Background Color</span>
                    <strong>10 Page Gradients Included</strong>
                    <span class="badge bg-highlight color-white">NEW</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </div>
        </div>
    </div>

    <!-- Menu Settings Highlights-->
    <div id="menu-highlights" class="menu menu-box-bottom menu-box-detached">
        <div class="menu-title"><h1>Highlights</h1><p class="color-highlight">Any Element can have a Highlight Color</p><a href="#" class="close-menu"><i class="fa fa-times"></i></a></div>
        <div class="divider divider-margins mb-n2"></div>
        <div class="content">
            <div class="highlight-changer">
                <a href="#" data-change-highlight="blue"><i class="fa fa-circle color-blue-dark"></i><span class="color-blue-light">Default</span></a>
                <a href="#" data-change-highlight="red"><i class="fa fa-circle color-red-dark"></i><span class="color-red-light">Red</span></a>
                <a href="#" data-change-highlight="orange"><i class="fa fa-circle color-orange-dark"></i><span class="color-orange-light">Orange</span></a>
                <a href="#" data-change-highlight="pink2"><i class="fa fa-circle color-pink2-dark"></i><span class="color-pink-dark">Pink</span></a>
                <a href="#" data-change-highlight="magenta"><i class="fa fa-circle color-magenta-dark"></i><span class="color-magenta-light">Purple</span></a>
                <a href="#" data-change-highlight="aqua"><i class="fa fa-circle color-aqua-dark"></i><span class="color-aqua-light">Aqua</span></a>
                <a href="#" data-change-highlight="teal"><i class="fa fa-circle color-teal-dark"></i><span class="color-teal-light">Teal</span></a>
                <a href="#" data-change-highlight="mint"><i class="fa fa-circle color-mint-dark"></i><span class="color-mint-light">Mint</span></a>
                <a href="#" data-change-highlight="green"><i class="fa fa-circle color-green-light"></i><span class="color-green-light">Green</span></a>
                <a href="#" data-change-highlight="grass"><i class="fa fa-circle color-green-dark"></i><span class="color-green-dark">Grass</span></a>
                <a href="#" data-change-highlight="sunny"><i class="fa fa-circle color-yellow-light"></i><span class="color-yellow-light">Sunny</span></a>
                <a href="#" data-change-highlight="yellow"><i class="fa fa-circle color-yellow-dark"></i><span class="color-yellow-light">Goldish</span></a>
                <a href="#" data-change-highlight="brown"><i class="fa fa-circle color-brown-dark"></i><span class="color-brown-light">Wood</span></a>
                <a href="#" data-change-highlight="night"><i class="fa fa-circle color-dark-dark"></i><span class="color-dark-light">Night</span></a>
                <a href="#" data-change-highlight="dark"><i class="fa fa-circle color-dark-light"></i><span class="color-dark-light">Dark</span></a>
                <div class="clearfix"></div>
            </div>
            <a href="#" data-menu="menu-settings" class="mb-3 btn btn-full btn-m rounded-sm bg-highlight shadow-xl text-uppercase font-900 mt-4">Back to Settings</a>
        </div>
    </div>

    <!-- Menu Settings Backgrounds-->
    <div id="menu-backgrounds" class="menu menu-box-bottom menu-box-detached">
        <div class="menu-title"><h1>Backgrounds</h1><p class="color-highlight">Change Page Color Behind Content Boxes</p><a href="#" class="close-menu"><i class="fa fa-times"></i></a></div>
        <div class="divider divider-margins mb-n2"></div>
        <div class="content">
            <div class="background-changer">
                <a href="#" data-change-background="default"><i class="bg-theme"></i><span class="color-dark-dark">Default</span></a>
                <a href="#" data-change-background="plum"><i class="body-plum"></i><span class="color-plum-dark">Plum</span></a>
                <a href="#" data-change-background="magenta"><i class="body-magenta"></i><span class="color-dark-dark">Magenta</span></a>
                <a href="#" data-change-background="dark"><i class="body-dark"></i><span class="color-dark-dark">Dark</span></a>
                <a href="#" data-change-background="violet"><i class="body-violet"></i><span class="color-violet-dark">Violet</span></a>
                <a href="#" data-change-background="red"><i class="body-red"></i><span class="color-red-dark">Red</span></a>
                <a href="#" data-change-background="green"><i class="body-green"></i><span class="color-green-dark">Green</span></a>
                <a href="#" data-change-background="sky"><i class="body-sky"></i><span class="color-sky-dark">Sky</span></a>
                <a href="#" data-change-background="orange"><i class="body-orange"></i><span class="color-orange-dark">Orange</span></a>
                <a href="#" data-change-background="yellow"><i class="body-yellow"></i><span class="color-yellow-dark">Yellow</span></a>
                <div class="clearfix"></div>
            </div>
            <a href="#" data-menu="menu-settings" class="mb-3 btn btn-full btn-m rounded-sm bg-highlight shadow-xl text-uppercase font-900 mt-4">Back to Settings</a>
        </div>
    </div>

</div>

<script type="text/javascript" src="scripts/bootstrap.min.js"></script>
<script type="text/javascript" src="scripts/custom.js"></script>
<script type="text/javascript">
// Home Workout Page Functionality
document.addEventListener('DOMContentLoaded', function() {
    // Hero video card functionality
    function initHeroVideoCard() {
        const heroCard = document.getElementById('hero-video-card');
        const heroVideo = document.getElementById('hero-video');
        const videoOverlay = heroCard.querySelector('.video-overlay');
        const playButton = heroCard.querySelector('.play-button');

        if (!heroCard || !heroVideo || !videoOverlay) return;

        // Function to adapt card height to video aspect ratio
        function adaptCardToVideo() {
            if (heroVideo.videoWidth && heroVideo.videoHeight) {
                const aspectRatio = heroVideo.videoHeight / heroVideo.videoWidth;
                const cardWidth = heroCard.offsetWidth;
                const newHeight = cardWidth * aspectRatio;

                // Set minimum height of 250px and maximum of 500px for better UX
                const finalHeight = Math.max(250, Math.min(500, newHeight));
                heroCard.style.height = finalHeight + 'px';
            }
        }

        // Adapt card when video metadata loads
        heroVideo.addEventListener('loadedmetadata', adaptCardToVideo);

        // Recalculate on window resize
        window.addEventListener('resize', adaptCardToVideo);

        // Play/pause functionality
        function toggleVideoPlayback() {
            if (heroVideo.paused) {
                heroVideo.play();
                videoOverlay.style.opacity = '0';
                playButton.innerHTML = '<i class="fa fa-pause" style="font-size: 24px; color: #333;"></i>';
            } else {
                heroVideo.pause();
                videoOverlay.style.opacity = '1';
                playButton.innerHTML = '<i class="fa fa-play" style="font-size: 24px; color: #333; margin-left: 4px;"></i>';
            }
        }

        // Event listeners
        videoOverlay.addEventListener('click', toggleVideoPlayback);
        heroVideo.addEventListener('click', toggleVideoPlayback);

        // Reset overlay when video ends
        heroVideo.addEventListener('ended', function() {
            videoOverlay.style.opacity = '1';
            playButton.innerHTML = '<i class="fa fa-play" style="font-size: 24px; color: #333; margin-left: 4px;"></i>';
        });
    }

    // Initialize hero video card
    initHeroVideoCard();

    // Image fallback functionality
    const preloadImages = document.querySelectorAll('.preload-img[data-fallback]');

    preloadImages.forEach(function(element) {
        const primarySrc = element.getAttribute('data-src');
        const fallbackSrc = element.getAttribute('data-fallback');

        // Test if primary image loads
        const testImg = new Image();
        testImg.onload = function() {
            // Primary image loaded successfully, use it
            element.style.backgroundImage = `url('${primarySrc}')`;
        };
        testImg.onerror = function() {
            // Primary image failed, use fallback
            element.style.backgroundImage = `url('${fallbackSrc}')`;
            element.setAttribute('data-src', fallbackSrc);
        };
        testImg.src = primarySrc;
    });

    // Home Workout functionality
    let workoutTimer = null;
    let workoutStartTime = 0;
    let workoutElapsedTime = 0;
    let workoutPaused = false;
    let currentExerciseDuration = 15 * 60; // 15 minutes default

    const exercises = {
        'push-ups': { name: 'Push-Up Challenge', duration: 15 * 60, video: 'https://data3.fra1.cdn.digitaloceanspaces.com/Timeline%201_00000000.mp4' },
        'squats': { name: 'Squats', duration: 5 * 60, video: 'https://data3.fra1.cdn.digitaloceanspaces.com/Timeline%201x00000000.mp4' },
        'planks': { name: 'Planks', duration: 3 * 60, video: 'https://data3.fra1.cdn.digitaloceanspaces.com/Timeline%201xxs00000000.mp4' },
        'burpees': { name: 'Burpees', duration: 4 * 60, video: 'https://data3.fra1.cdn.digitaloceanspaces.com/Timeline%201xx00000000.mp4' }
    };

    let currentExercise = 'push-ups';

    // Workout timer functions
    function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    function updateWorkoutTimer() {
        const timerElement = document.getElementById('workout-timer');
        if (timerElement) {
            const elapsed = formatTime(workoutElapsedTime);
            const total = formatTime(currentExerciseDuration);
            timerElement.textContent = `${elapsed} / ${total}`;
        }
    }

    function startWorkoutTimer() {
        if (!workoutPaused) {
            workoutStartTime = Date.now() - (workoutElapsedTime * 1000);
        } else {
            workoutStartTime = Date.now() - (workoutElapsedTime * 1000);
            workoutPaused = false;
        }

        workoutTimer = setInterval(() => {
            workoutElapsedTime = Math.floor((Date.now() - workoutStartTime) / 1000);
            updateWorkoutTimer();

            if (workoutElapsedTime >= currentExerciseDuration) {
                pauseWorkoutTimer();
            }
        }, 1000);
    }

    function pauseWorkoutTimer() {
        if (workoutTimer) {
            clearInterval(workoutTimer);
            workoutTimer = null;
            workoutPaused = true;
        }
    }

    function resetWorkoutTimer() {
        if (workoutTimer) {
            clearInterval(workoutTimer);
            workoutTimer = null;
        }
        workoutElapsedTime = 0;
        workoutPaused = false;
        updateWorkoutTimer();
    }

    // Main video player functionality
    function initMainVideoPlayer() {
        const mainVideo = document.getElementById('main-workout-video');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const videoProgress = document.getElementById('video-progress');
        const videoTime = document.getElementById('video-time');
        const overlay = document.getElementById('main-video-overlay');
        const videoContainer = document.querySelector('.main-workout-video');

        if (!mainVideo) return;

        // Function to adapt container to video size
        function adaptContainerToVideo() {
            if (mainVideo.videoWidth && mainVideo.videoHeight) {
                const card = videoContainer.closest('.card');

                if (videoContainer && card) {
                    // Set card and container to exact video dimensions
                    card.style.width = mainVideo.videoWidth + 'px';
                    card.style.height = (mainVideo.videoHeight + 60) + 'px'; // +60px for title

                    videoContainer.style.width = mainVideo.videoWidth + 'px';
                    videoContainer.style.height = mainVideo.videoHeight + 'px';
                }
            }
        }

        // Adapt container when video metadata loads
        mainVideo.addEventListener('loadedmetadata', adaptContainerToVideo);

        // Recalculate on window resize
        window.addEventListener('resize', function() {
            if (mainVideo.videoWidth && mainVideo.videoHeight) {
                adaptContainerToVideo();
            }
        });

        // Update video time and progress
        mainVideo.addEventListener('timeupdate', function() {
            if (mainVideo.duration) {
                const progress = (mainVideo.currentTime / mainVideo.duration) * 100;
                if (videoProgress) videoProgress.style.width = progress + '%';

                if (videoTime) {
                    const current = formatTime(Math.floor(mainVideo.currentTime));
                    const duration = formatTime(Math.floor(mainVideo.duration));
                    videoTime.textContent = `${current} / ${duration}`;
                }
            }
        });

        // Play/pause functionality
        function togglePlayPause() {
            if (mainVideo.paused) {
                mainVideo.play();
                if (playPauseBtn) playPauseBtn.innerHTML = '<i class="fa fa-pause"></i>';
                if (overlay) overlay.style.opacity = '0';
            } else {
                mainVideo.pause();
                if (playPauseBtn) playPauseBtn.innerHTML = '<i class="fa fa-play"></i>';
                if (overlay) overlay.style.opacity = '1';
            }
        }

        // Event listeners
        if (overlay) overlay.addEventListener('click', togglePlayPause);
        if (playPauseBtn) playPauseBtn.addEventListener('click', togglePlayPause);
        mainVideo.addEventListener('click', togglePlayPause);
    }

    // Switch exercise function
    function switchExercise(exerciseKey) {
        const exercise = exercises[exerciseKey];
        if (!exercise) return;

        currentExercise = exerciseKey;
        currentExerciseDuration = exercise.duration;

        // Update UI
        const titleElement = document.getElementById('current-exercise-title');
        if (titleElement) titleElement.textContent = exercise.name;

        // Update main video
        const mainVideo = document.getElementById('main-workout-video');
        const videoContainer = document.querySelector('.main-workout-video');

        if (mainVideo) {
            mainVideo.pause();
            mainVideo.querySelector('source').src = exercise.video;
            mainVideo.load();

            // Adapt container to new video's size when it loads
            mainVideo.addEventListener('loadedmetadata', function adaptNewVideo() {
                if (mainVideo.videoWidth && mainVideo.videoHeight) {
                    const card = videoContainer.closest('.card');

                    if (videoContainer && card) {
                        // Set card and container to exact video dimensions
                        card.style.width = mainVideo.videoWidth + 'px';
                        card.style.height = (mainVideo.videoHeight + 60) + 'px'; // +60px for title

                        videoContainer.style.width = mainVideo.videoWidth + 'px';
                        videoContainer.style.height = mainVideo.videoHeight + 'px';
                    }
                }
                // Remove this event listener after it runs once
                mainVideo.removeEventListener('loadedmetadata', adaptNewVideo);
            });
        }

        // Reset timer
        resetWorkoutTimer();

        // Reset video controls
        const playPauseBtn = document.getElementById('play-pause-btn');
        const overlay = document.getElementById('main-video-overlay');
        if (playPauseBtn) playPauseBtn.innerHTML = '<i class="fa fa-play"></i>';
        if (overlay) overlay.style.opacity = '1';
    }

    // Function to extract thumbnail from video
    function extractThumbnail(video, canvas, time = 1) {
        return new Promise((resolve, reject) => {
            const tempVideo = document.createElement('video');
            tempVideo.crossOrigin = 'anonymous';
            tempVideo.muted = true;
            tempVideo.preload = 'metadata';

            tempVideo.addEventListener('loadedmetadata', function() {
                tempVideo.currentTime = Math.min(time, tempVideo.duration * 0.1);
            });

            tempVideo.addEventListener('seeked', function() {
                try {
                    const ctx = canvas.getContext('2d');
                    canvas.width = tempVideo.videoWidth;
                    canvas.height = tempVideo.videoHeight;
                    ctx.drawImage(tempVideo, 0, 0, canvas.width, canvas.height);

                    canvas.toBlob(function(blob) {
                        const thumbnailUrl = URL.createObjectURL(blob);
                        resolve(thumbnailUrl);
                    }, 'image/jpeg', 0.8);
                } catch (error) {
                    reject(error);
                }
            });

            tempVideo.addEventListener('error', function() {
                reject(new Error('Failed to load video for thumbnail extraction'));
            });

            tempVideo.src = video.querySelector('source').src;
        });
    }

    // Initialize home workout functionality
    initMainVideoPlayer();
    updateWorkoutTimer();

    // Timer control event listeners
    const timerStartBtn = document.getElementById('timer-start');
    const timerPauseBtn = document.getElementById('timer-pause');
    const timerResetBtn = document.getElementById('timer-reset');

    if (timerStartBtn) {
        timerStartBtn.addEventListener('click', startWorkoutTimer);
    }

    if (timerPauseBtn) {
        timerPauseBtn.addEventListener('click', pauseWorkoutTimer);
    }

    if (timerResetBtn) {
        timerResetBtn.addEventListener('click', resetWorkoutTimer);
    }

    // Exercise preview click handlers
    const exercisePreviews = document.querySelectorAll('.exercise-preview');
    exercisePreviews.forEach(function(preview) {
        preview.addEventListener('click', function(e) {
            e.preventDefault();
            const exerciseKey = this.getAttribute('data-exercise');
            if (exerciseKey) {
                switchExercise(exerciseKey);
            }
        });
    });

    // Add video card functionality to preview videos
    const previewVideos = document.querySelectorAll('.preview-video');
    previewVideos.forEach(function(container) {
        const video = container.querySelector('video');
        const canvas = container.querySelector('.video-thumbnail');
        const overlay = container.querySelector('.video-overlay');

        if (video && canvas && overlay) {
            // Extract and set thumbnail for preview videos
            extractThumbnail(video, canvas)
                .then(function(thumbnailUrl) {
                    const thumbnailImg = document.createElement('img');
                    thumbnailImg.src = thumbnailUrl;
                    thumbnailImg.className = 'video-thumbnail';
                    thumbnailImg.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; display: block;';

                    container.insertBefore(thumbnailImg, overlay);
                })
                .catch(function(error) {
                    console.warn('Failed to extract preview thumbnail:', error);
                });
        }
    });
});
</script>
</body>
</html>
